<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì–´í–‰ë• ì¤‘ê³ ê±°ë˜ ê²€ìƒ‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo",
        "Noto Sans KR", system-ui, sans-serif;
    }

    body {
      background: #f3f4f6;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .app {
      width: 420px;
      max-width: 100%;
      height: 780px;
      max-height: 100vh;
      background: #ffffff;
      border-radius: 24px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* ìƒë‹¨ë°” */
    .header {
      height: 60px;
      display: flex;
      align-items: center;
      padding: 0 16px;
      border-bottom: 1px solid #e5e7eb;
      background: #ffffff;
      gap: 10px;
    }

    .back-btn {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      border: none;
      background: #f3f4f6;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
    }

    .logo-pin {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      background: #facc15;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    .header-title {
      font-size: 15px;
      font-weight: 600;
      color: #111827;
    }

    .header-sub {
      font-size: 11px;
      color: #6b7280;
    }

    .header-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    /* ê²€ìƒ‰ë°” */
    .search-bar-wrap {
      padding: 10px 14px 6px;
      background: #ffffff;
    }

    .search-bar {
      display: flex;
      align-items: center;
      background: #fffbeb;
      border-radius: 999px;
      border: 2px solid #facc15;
      padding: 6px 12px;
      gap: 6px;
    }

    .search-icon {
      font-size: 16px;
      color: #f59e0b;
    }

    .search-input {
      border: none;
      outline: none;
      background: transparent;
      width: 100%;
      font-size: 14px;
    }

    .search-clear {
      border: none;
      background: transparent;
      font-size: 16px;
      color: #d1d5db;
      cursor: pointer;
    }

    .search-helper {
      padding: 4px 2px 2px;
      font-size: 11px;
      color: #9ca3af;
    }

    .search-helper span {
      color: #f59e0b;
      font-weight: 500;
    }

    /* íƒœê·¸(ì„¸ë¶€ ì¹´í…Œê³ ë¦¬) ë²„íŠ¼ */
    .tag-row {
      padding: 4px 14px 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
    }

    .tag-btn {
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      font-size: 11px;
      padding: 5px 10px;
      cursor: pointer;
      color: #4b5563;
      transition: background 0.1s ease, border-color 0.1s ease, transform 0.05s ease;
    }

    .tag-btn:hover {
      background: #fef3c7;
    }

    .tag-btn.active {
      background: #facc15;
      border-color: #fbbf24;
      color: #111827;
      font-weight: 600;
    }

    /* ë³¸ë¬¸ */
    .main {
      flex: 1;
      background: #f9fafb;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .result-header {
      padding: 8px 14px 4px;
      font-size: 12px;
      color: #6b7280;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .result-header span strong {
      color: #111827;
    }

    .sort-pill {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      background: #e5e7eb;
      color: #4b5563;
    }

    .product-list {
      flex: 1;
      overflow-y: auto;
      padding: 6px 10px 10px;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
    }

    .product-card {
      background: #ffffff;
      border-radius: 16px;
      border: 1px solid #e5e7eb;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .product-image {
      height: 120px;
      border-bottom: 1px solid #f3f4f6;
      background: #fef9c3;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #374151;
      text-align: center;
      padding: 4px;
    }

    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .product-body {
      padding: 6px 8px 8px;
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .product-title {
      font-size: 12px;
      font-weight: 600;
      color: #111827;
      line-height: 1.3;
      min-height: 30px;
    }

    .product-meta {
      font-size: 11px;
      color: #6b7280;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .product-chip {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      background: #eff6ff;
      color: #1d4ed8;
    }

    .product-price {
      font-size: 13px;
      font-weight: 700;
      color: #111827;
      margin-top: 2px;
    }

    .no-result {
      padding: 40px 16px;
      text-align: center;
      font-size: 13px;
      color: #9ca3af;
    }

    .no-result strong {
      color: #111827;
    }

    /* í•˜ë‹¨ ë„¤ë¹„ (ê²€ìƒ‰ íƒ­ í™œì„±í™” ë²„ì „) */
    .bottom-nav {
      height: 60px;
      border-top: 1px solid #e5e7eb;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: space-around;
      font-size: 11px;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      color: #9ca3af;
    }

    .nav-item .icon {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    .nav-item.active {
      color: #f59e0b;
      font-weight: 600;
    }

    .nav-item.active .icon {
      background: #fef3c7;
      border-color: #facc15;
    }

    @media (max-width: 480px) {
      .app {
        width: 100%;
        height: 100vh;
        border-radius: 0;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- ìƒë‹¨ -->
    <div class="header">
      <button class="back-btn" title="ë’¤ë¡œê°€ê¸°">â†</button>
      <div class="logo-pin">ğŸ¦†</div>
      <div class="header-text">
        <div class="header-title">ì¤‘ê³ ê±°ë˜ í†µí•© ê²€ìƒ‰</div>
        <div class="header-sub">K-POP Â· ì• ë‹ˆë©”ì´ì…˜ Â· ìºë¦­í„° êµ¿ì¦ˆ í•œ ë²ˆì— ì°¾ê¸°</div>
      </div>
    </div>

    <!-- ê²€ìƒ‰ë°” -->
    <div class="search-bar-wrap">
      <div class="search-bar">
        <span class="search-icon">ğŸ”</span>
        <input
          id="searchInput"
          class="search-input"
          type="text"
          placeholder="ê·¸ë£¹/ìºë¦­í„°/ìƒí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”"
        />
        <button id="clearBtn" class="search-clear" title="ì§€ìš°ê¸°">âœ•</button>
      </div>
      <div class="search-helper">
        ì˜ˆì‹œ) <span>NCT ë§ˆí¬ í¬ì¹´</span>, <span>ê·€ë©¸ í”¼ê·œì–´</span>, <span>ì‚°ë¦¬ì˜¤ ì¸í˜•</span>, <span>ë‹¤ë§ˆê³ ì¹˜</span>
      </div>
    </div>

    <!-- íƒœê·¸ ë²„íŠ¼ (ì„¸ë¶€ ì¹´í…Œê³ ë¦¬) -->
    <div class="tag-row" id="tagRow">
      <!-- JSì—ì„œ ìƒì„± -->
    </div>

    <!-- ê²°ê³¼ ì˜ì—­ -->
    <div class="main">
      <div class="result-header">
        <span id="resultText">ì¶”ì²œ ìƒí’ˆ <strong>0</strong>ê°œ</span>
        <span class="sort-pill">ì¸ê¸°ìˆœ(ìƒ˜í”Œ)</span>
      </div>
      <div class="product-list">
        <div id="productGrid" class="product-grid"></div>
        <div id="noResult" class="no-result" style="display:none;">
          <strong>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì–´ìš”.</strong><br/>
          ì² ìë¥¼ ë‹¤ì‹œ í™•ì¸í•˜ê±°ë‚˜ ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ ì£¼ì„¸ìš” :)
        </div>
      </div>
    </div>

    <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <div class="bottom-nav">
      <div class="nav-item">
        <div class="icon">ğŸ—ºï¸</div>
        <span>ë•ì§ˆì§€ë„</span>
      </div>
      <div class="nav-item active">
        <div class="icon">ğŸ”</div>
        <span>ê²€ìƒ‰</span>
      </div>
      <div class="nav-item">
        <div class="icon">ğŸ‘¤</div>
        <span>MY</span>
      </div>
    </div>
  </div>

  <script>
    // ===== ì„¸ë¶€ ì¹´í…Œê³ ë¦¬ ì •ì˜ =====
    const subCategories = [
      { id: "NCT", label: "NCT", group: "K-POP" },
      { id: "RIIZE", label: "RIIZE", group: "K-POP" },
      { id: "BLACKPINK", label: "BLACKPINK", group: "K-POP" },
      { id: "DEMON_SLAYER", label: "ê·€ë©¸ì˜ ì¹¼ë‚ ", group: "ì• ë‹ˆë©”ì´ì…˜" },
      { id: "HAIKYU", label: "í•˜ì´í", group: "ì• ë‹ˆë©”ì´ì…˜" },
      { id: "SANRIO", label: "ì‚°ë¦¬ì˜¤", group: "ìºë¦­í„°" },
      { id: "LABUBU", label: "ë¼ë¶€ë¶€", group: "ìºë¦­í„°" },
      { id: "TAMAGOTCHI", label: "ë‹¤ë§ˆê³ ì¹˜", group: "ìºë¦­í„°" },
      { id: "GHIBLI", label: "ì§€ë¸Œë¦¬", group: "ìºë¦­í„°" },
      { id: "KAKAO", label: "ì¹´ì¹´ì˜¤í”„ë Œì¦ˆ", group: "ìºë¦­í„°" },
      { id: "GANADI", label: "ê°€ë‚˜ë””", group: "ìºë¦­í„°" }
    ];

    // ===== ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ (ì´ë¯¸ì§€ ê²½ë¡œ í¬í•¨) =====
    const products = [
      // K-POP - NCT
      {
        id: "p1",
        category: "K-POP",
        sub: "NCT",
        title: "NCT DREAM ë§ˆí¬ í¬í† ì¹´ë“œ ì„¸íŠ¸",
        price: 8000,
        badge: "ê³µì‹ MD",
        keywords: ["ì—”ì‹œí‹°", "ë§ˆí¬", "í¬ì¹´", "í¬í† ì¹´ë“œ", "nct"],
        img: "images/kpop_nct_mark.png"
      },
      {
        id: "p2",
        category: "K-POP",
        sub: "NCT",
        title: "ì—”ì‹œí‹° ìœ„ì‹œ ìœ ìš°ì‹œ í¬ì¹´ ì¼ê´„",
        price: 12000,
        badge: "ì•¨ë²” íŠ¹ì „",
        keywords: ["ì—”ì‹œí‹° ìœ„ì‹œ", "ìœ ìš°ì‹œ", "í¬ì¹´", "wish", "nct wish"],
        img: "images/kpop_nct_yuusi.png"
      },
      {
        id: "p3",
        category: "K-POP",
        sub: "NCT",
        title: "NCT íƒœìš© í¬ì¹´ ëª¨ìŒ",
        price: 15000,
        badge: "ì¼ê´„ íŒë§¤",
        keywords: ["íƒœìš©", "ì²´ë¦¬ë°¤", "í¬ì¹´", "nct"],
        img: "images/kpop_nct_taeyong.png"
      },

      // K-POP - RIIZE
      {
        id: "p4",
        category: "K-POP",
        sub: "RIIZE",
        title: "RIIZE ê³µì‹ ìŠ¬ë¡œê±´ ì„¸íŠ¸",
        price: 9000,
        badge: "ê³µë°© ì œì‘",
        keywords: ["ë¼ì´ì¦ˆ", "ìŠ¬ë¡œê±´", "ì‘ì›ë´‰", "riize"],
        img: "images/kpop_riize_slogan.png"
      },
      {
        id: "p5",
        category: "K-POP",
        sub: "RIIZE",
        title: "RIIZE í¬í† ì¹´ë“œ ë°”ì¸ë”",
        price: 13000,
        badge: "ë³´ê´€ìš©",
        keywords: ["ë¼ì´ì¦ˆ", "í¬ì¹´ë°”ì¸ë”", "ë°”ì¸ë”", "riize"],
        img: "images/kpop_riize_binder.png"
      },

      // K-POP - BLACKPINK
      {
        id: "p6",
        category: "K-POP",
        sub: "BLACKPINK",
        title: "BLACKPINK ì œë‹ˆ ì½˜ì„œíŠ¸ í¬ì¹´",
        price: 11000,
        badge: "ì½˜ì„œíŠ¸ MD",
        keywords: ["ë¸”ë™í•‘í¬", "ì œë‹ˆ", "í¬ì¹´", "bp", "blackpink"],
        img: "images/kpop_bp_jennie.png"
      },
      {
        id: "p7",
        category: "K-POP",
        sub: "BLACKPINK",
        title: "ë¸”ë™í•‘í¬ ê³µì‹ ì‘ì›ë´‰ ver.2",
        price: 25000,
        badge: "ì‘ì›ë´‰",
        keywords: ["ë¸”í•‘ë´‰", "ë¼ì´íŠ¸ìŠ¤í‹±", "blackpink"],
        img: "images/kpop_bp_lightstick.png"
      },

      // ì• ë‹ˆë©”ì´ì…˜ - ê·€ë©¸ì˜ ì¹¼ë‚ 
      {
        id: "p8",
        category: "ì• ë‹ˆë©”ì´ì…˜",
        sub: "ê·€ë©¸ì˜ ì¹¼ë‚ ",
        title: "ê·€ë©¸ì˜ ì¹¼ë‚  ë Œê³ ì¿  í”¼ê·œì–´",
        price: 64000,
        badge: "í”¼ê·œì–´",
        keywords: ["ê·€ë©¸", "ê·€ì¹¼", "ë Œê³ ì¿ ", "í”¼ê·œì–´"],
        img: "images/ani_ds_rengoku.png"
      },
      {
        id: "p9",
        category: "ì• ë‹ˆë©”ì´ì…˜",
        sub: "ê·€ë©¸ì˜ ì¹¼ë‚ ",
        title: "ê·€ë©¸ì˜ ì¹¼ë‚  ì£¼í•©íšŒì˜ ì½œë ‰íŒ… ì¹´ë“œ",
        price: 32000,
        badge: "ì¹´ë“œ ì„¸íŠ¸",
        keywords: ["ê·€ë©¸", "ì£¼í•©íšŒì˜", "ì¹´ë“œ"],
        img: "images/ani_ds_card.png"
      },
      {
        id: "p10",
        category: "ì• ë‹ˆë©”ì´ì…˜",
        sub: "ê·€ë©¸ì˜ ì¹¼ë‚ ",
        title: "íƒ„ì§€ë¡œ & ë„¤ì¦ˆì½” íí¬ìŠ¤ì¼“",
        price: 28000,
        badge: "í”¼ê·œì–´ ì„¸íŠ¸",
        keywords: ["íƒ„ì§€ë¡œ", "ë„¤ì¦ˆì½”", "íí¬ìŠ¤ì¼“"],
        img: "images/ani_ds_qposket.png"
      },

      // ì• ë‹ˆë©”ì´ì…˜ - í•˜ì´í
      {
        id: "p11",
        category: "ì• ë‹ˆë©”ì´ì…˜",
        sub: "í•˜ì´í",
        title: "í•˜ì´í íˆë‚˜íƒ€ í”¼ê·œì–´",
        price: 21000,
        badge: "í”¼ê·œì–´",
        keywords: ["í•˜ì´í", "íˆë‚˜íƒ€", "ë°°êµ¬"],
        img: "images/ani_hq_hinata.png"
      },
      {
        id: "p12",
        category: "ì• ë‹ˆë©”ì´ì…˜",
        sub: "í•˜ì´í",
        title: "ì¹´ë¼ìŠ¤ë…¸ ë°°êµ¬ë¶€ ì•„í¬ë¦´ í‚¤ë§ ì„¸íŠ¸",
        price: 14000,
        badge: "í‚¤ë§",
        keywords: ["í•˜ì´í", "ì¹´ë¼ìŠ¤ë…¸", "í‚¤ë§"],
        img: "images/ani_hq_keyring.png"
      },

      // ìºë¦­í„° - ì‚°ë¦¬ì˜¤
      {
        id: "p13",
        category: "ìºë¦­í„°",
        sub: "ì‚°ë¦¬ì˜¤",
        title: "ì‚°ë¦¬ì˜¤ ì‹œë‚˜ëª¨ë¡¤ ëˆˆê½ƒìš”ì • ì¸í˜•",
        price: 10000,
        badge: "ì •í’ˆ",
        keywords: ["ì‚°ë¦¬ì˜¤", "ì‹œë‚˜ëª¨ë¡¤", "ì¸í˜•", "ì‹œë‚˜ëª¨ë¡¤ ì¸í˜•"],
        img: "images/char_sanrio_cinnamoroll.png"
      },
      {
        id: "p14",
        category: "ìºë¦­í„°",
        sub: "ì‚°ë¦¬ì˜¤",
        title: "ë§ˆì´ë©œë¡œë”” êµë³µ ì¸í˜• í‚¤ë§",
        price: 11000,
        badge: "í‚¤ë§",
        keywords: ["ì‚°ë¦¬ì˜¤", "ë§ˆë©œ", "ë§ˆì´ë©œë¡œë””", "í‚¤ë§"],
        img: "images/char_sanrio_mymelody.png"
      },
      {
        id: "p15",
        category: "ìºë¦­í„°",
        sub: "ì‚°ë¦¬ì˜¤",
        title: "ë°”ë‚˜ë‚˜ í¬ì°¨ì½” ìŠ¤íŠ¸ë© í‚¤ë§",
        price: 9000,
        badge: "í‚¤ë§",
        keywords: ["ì‚°ë¦¬ì˜¤", "í¬ì°¨ì½”", "í‚¤ë§"],
        img: "images/char_sanrio_pochacco.png"
      },

      // ìºë¦­í„° - ë¼ë¶€ë¶€
      {
        id: "p16",
        category: "ìºë¦­í„°",
        sub: "ë¼ë¶€ë¶€",
        title: "ë¼ë¶€ë¶€ ë¯¸ë‹ˆ í”¼ê·œì–´ ë¸”ë¼ì¸ë“œ ë°•ìŠ¤",
        price: 18000,
        badge: "í”¼ê·œì–´",
        keywords: ["ë¼ë¶€ë¶€", "labubu", "í”¼ê·œì–´"],
        img: "images/char_labubu_blind.png"
      },
      {
        id: "p17",
        category: "ìºë¦­í„°",
        sub: "ë¼ë¶€ë¶€",
        title: "ë¼ë¶€ë¶€ ìºë¦­í„° í‚¤ë§ ì„¸íŠ¸",
        price: 15000,
        badge: "í‚¤ë§ ì„¸íŠ¸",
        keywords: ["ë¼ë¶€ë¶€", "í‚¤ë§"],
        img: "images/char_labubu_keyring.png"
      },

      // ìºë¦­í„° - ë‹¤ë§ˆê³ ì¹˜
      {
        id: "p18",
        category: "ìºë¦­í„°",
        sub: "ë‹¤ë§ˆê³ ì¹˜",
        title: "ë‹¤ë§ˆê³ ì¹˜ íŒŒë¼ë‹¤ì´ìŠ¤ í¼í”Œ",
        price: 74000,
        badge: "ë³¸ì²´",
        keywords: ["ë‹¤ë§ˆê³ ì¹˜", "íŒŒë¼ë‹¤ì´ìŠ¤", "ë³¸ì²´"],
        img: "images/char_tamagotchi_purple.png"
      },
      {
        id: "p19",
        category: "ìºë¦­í„°",
        sub: "ë‹¤ë§ˆê³ ì¹˜",
        title: "ë‹¤ë§ˆê³ ì¹˜ ì¸ ë§¤ì§€ì»¬ í¼í”Œ",
        price: 216000,
        badge: "í•œì •íŒ",
        keywords: ["ë‹¤ë§ˆê³ ì¹˜", "ì¸", "í•œì •íŒ"],
        img: "images/char_tamagotchi_magic.png"
      },

      // ìºë¦­í„° - ì§€ë¸Œë¦¬
      {
        id: "p20",
        category: "ìºë¦­í„°",
        sub: "ì§€ë¸Œë¦¬",
        title: "í† í† ë¡œ ë´‰ì œ ì¸í˜• (ëŒ€í˜•)",
        price: 35000,
        badge: "ì§€ë¸Œë¦¬",
        keywords: ["ì§€ë¸Œë¦¬", "í† í† ë¡œ", "ì¸í˜•"],
        img: "images/char_ghibli_totoro.png"
      },
      {
        id: "p21",
        category: "ìºë¦­í„°",
        sub: "ì§€ë¸Œë¦¬",
        title: "í‚¤í‚¤ ë°°ë‹¬ë¶€ ì§€ë¸Œë¦¬ ë¨¸ê·¸ì»µ",
        price: 17000,
        badge: "ë¨¸ê·¸ì»µ",
        keywords: ["ì§€ë¸Œë¦¬", "í‚¤í‚¤", "ë¨¸ê·¸"],
        img: "images/char_ghibli_kiki.png"
      },

      // ìºë¦­í„° - ì¹´ì¹´ì˜¤í”„ë Œì¦ˆ
      {
        id: "p22",
        category: "ìºë¦­í„°",
        sub: "ì¹´ì¹´ì˜¤í”„ë Œì¦ˆ",
        title: "ë¼ì´ì–¸ ìˆ˜ë©´ ì•ˆëŒ€ ì¸í˜•",
        price: 8000,
        badge: "ì¿ ì…˜",
        keywords: ["ì¹´ì¹´ì˜¤", "ë¼ì´ì–¸", "ì¹´ì¹´ì˜¤í”„ë Œì¦ˆ"],
        img: "images/char_kakao_ryan.png"
      },
      {
        id: "p23",
        category: "ìºë¦­í„°",
        sub: "ì¹´ì¹´ì˜¤í”„ë Œì¦ˆ",
        title: "ì–´í”¼ì¹˜ ë¯¸ë‹ˆ ê°€ìŠµê¸°",
        price: 19000,
        badge: "ë¦¬ë¹™",
        keywords: ["ì–´í”¼ì¹˜", "ì¹´ì¹´ì˜¤", "ê°€ìŠµê¸°"],
        img: "images/char_kakao_apeach.png"
      },

      // ìºë¦­í„° - ê°€ë‚˜ë””
      {
        id: "p24",
        category: "ìºë¦­í„°",
        sub: "ê°€ë‚˜ë””",
        title: "ê°€ë‚˜ë”” ê³°ëŒì´ ì¸í˜• ì„¸íŠ¸",
        price: 22000,
        badge: "ì¸í˜• ì„¸íŠ¸",
        keywords: ["ê°€ë‚˜ë””", "ì¸í˜•"],
        img: "images/char_ganadi_set.png"
      },
      {
        id: "p25",
        category: "ìºë¦­í„°",
        sub: "ê°€ë‚˜ë””",
        title: "ê°€ë‚˜ë”” ë² ê°œ ì¿ ì…˜",
        price: 26000,
        badge: "ì¿ ì…˜",
        keywords: ["ê°€ë‚˜ë””", "ì¿ ì…˜"],
        img: "images/char_ganadi_cushion.png"
      }
    ];

    // ê²€ìƒ‰ìš© ë¬¸ìì—´ ë¯¸ë¦¬ ìƒì„±
    products.forEach(p => {
      const all = [
        p.category,
        p.sub,
        p.title,
        ...(p.keywords || [])
      ].join(" ").toLowerCase();
      p.searchText = all.replace(/\s+/g, "");
    });

    // ===== DOM ìš”ì†Œ =====
    const searchInput = document.getElementById("searchInput");
    const clearBtn = document.getElementById("clearBtn");
    const productGrid = document.getElementById("productGrid");
    const resultText = document.getElementById("resultText");
    const noResult = document.getElementById("noResult");
    const tagRow = document.getElementById("tagRow");

    // íƒœê·¸ ë²„íŠ¼ ë Œë”ë§
    subCategories.forEach(sc => {
      const btn = document.createElement("button");
      btn.className = "tag-btn";
      btn.textContent = `${sc.label}`;
      btn.dataset.sub = sc.sub || sc.id;
      tagRow.appendChild(btn);

      btn.addEventListener("click", () => {
        // active í‘œì‹œ
        document
          .querySelectorAll(".tag-btn")
          .forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        searchInput.value = sc.label;
        doSearch();
      });
    });

    // ìƒí’ˆ ì¹´ë“œ ë Œë”ë§
    function renderProducts(list) {
      productGrid.innerHTML = "";
      if (list.length === 0) {
        noResult.style.display = "block";
        resultText.innerHTML = `ê²€ìƒ‰ ê²°ê³¼ <strong>0</strong>ê°œ`;
        return;
      }
      noResult.style.display = "none";
      resultText.innerHTML = `ê²€ìƒ‰ ê²°ê³¼ <strong>${list.length}</strong>ê°œ`;

      list.forEach(p => {
        const card = document.createElement("div");
        card.className = "product-card";

        const imgWrap = document.createElement("div");
        imgWrap.className = "product-image";

        if (p.img) {
          const imageTag = document.createElement("img");
          imageTag.src = p.img;
          imageTag.alt = p.title;
          imgWrap.appendChild(imageTag);
        } else {
          imgWrap.textContent = `${p.sub} / ${p.category}\nì´ë¯¸ì§€ ì—†ìŒ`;
        }

        const body = document.createElement("div");
        body.className = "product-body";

        const title = document.createElement("div");
        title.className = "product-title";
        title.textContent = p.title;

        const meta = document.createElement("div");
        meta.className = "product-meta";
        const metaLeft = document.createElement("span");
        metaLeft.textContent = p.sub;
        const badge = document.createElement("span");
        badge.className = "product-chip";
        badge.textContent = p.badge;
        meta.appendChild(metaLeft);
        meta.appendChild(badge);

        const price = document.createElement("div");
        price.className = "product-price";
        price.textContent = p.price.toLocaleString("ko-KR") + "ì›";

        body.appendChild(title);
        body.appendChild(meta);
        body.appendChild(price);

        card.appendChild(imgWrap);
        card.appendChild(body);
        productGrid.appendChild(card);
      });
    }

    // ê²€ìƒ‰ ì‹¤í–‰
    function doSearch() {
      const raw = searchInput.value || "";
      const query = raw.toLowerCase().replace(/\s+/g, "");

      // íƒœê·¸ active ë¦¬ì…‹ (ì§ì ‘ ì…ë ¥ ì‹œ)
      if (document.activeElement === searchInput) {
        document
          .querySelectorAll(".tag-btn")
          .forEach(b => b.classList.remove("active"));
      }

      if (!query) {
        renderProducts(products); // ì „ì²´ ì¶”ì²œ
        return;
      }

      const result = products.filter(p => p.searchText.includes(query));
      renderProducts(result);
    }

    // ì´ë²¤íŠ¸ ë°”ì¸ë”©
    searchInput.addEventListener("input", () => {
      doSearch();
    });

    searchInput.addEventListener("keydown", e => {
      if (e.key === "Enter") {
        e.preventDefault();
        doSearch();
      }
    });

    clearBtn.addEventListener("click", () => {
      searchInput.value = "";
      document
        .querySelectorAll(".tag-btn")
        .forEach(b => b.classList.remove("active"));
      doSearch();
      searchInput.focus();
    });

    // ì´ˆê¸° ë Œë”: ì¶”ì²œ ìƒí’ˆ ì „ì²´
    window.addEventListener("load", () => {
      renderProducts(products);
    });
  </script>
</body>
</html>
