<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì–´í–‰ë• ê±°ë˜ ë¬¸ì˜</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo",
        "Noto Sans KR", system-ui, sans-serif;
    }

    body {
      background: #f3f4f6;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .app {
      width: 420px;
      max-width: 100%;
      height: 780px;
      max-height: 100vh;
      background: #ffffff;
      border-radius: 24px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* ìƒë‹¨ ë°” */
    .header {
      height: 56px;
      display: flex;
      align-items: center;
      padding: 0 16px;
      border-bottom: 1px solid #e5e7eb;
      background: #ffffff;
    }

    .header-left,
    .header-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .header-left {
      flex: 1;
    }

    .back-btn {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      border: none;
      background: #f3f4f6;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
    }

    .chat-title {
      display: flex;
      flex-direction: column;
    }

    .chat-title-main {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
    }

    .chat-title-sub {
      font-size: 12px;
      color: #6b7280;
    }

    .header-right {
      justify-content: flex-end;
      color: #9ca3af;
      font-size: 20px;
      min-width: 40px;
    }

    /* ê±°ë˜ ìƒëŒ€ ì •ë³´ ë°•ìŠ¤ (íŒë§¤ì) */
    .partner-info {
      background: #fff7cc; /* ì—°ë…¸ë‘ */
      padding: 12px 16px;
      display: flex;
      gap: 12px;
      border-bottom: 1px solid #facc15;
    }

    .partner-avatar {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      background: #fde68a;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .partner-avatar img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .partner-text {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .partner-row-1 {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .partner-nick {
      font-weight: 600;
      font-size: 14px;
      color: #111827;
    }

    .partner-tag {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: #fef3c7;
      border: 1px solid #facc15;
      color: #92400e;
    }

    .partner-row-2 {
      font-size: 12px;
      color: #6b7280;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .partner-row-3 {
      font-size: 11px;
      color: #4b5563;
    }

    /* ìƒí’ˆ ì •ë³´ ì¹´ë“œ */
    .product-card {
      margin: 8px 16px;
      padding: 8px 10px;
      border-radius: 14px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .product-thumb {
      width: 46px;
      height: 46px;
      border-radius: 12px;
      background: linear-gradient(135deg, #fee2e2, #bfdbfe);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: #374151;
      text-align: center;
    }

    .product-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .product-title {
      font-size: 13px;
      font-weight: 600;
      color: #111827;
    }

    .product-meta {
      font-size: 11px;
      color: #6b7280;
    }

    .product-meta span + span::before {
      content: "Â· ";
      margin: 0 1px;
    }

    .product-price {
      font-size: 13px;
      font-weight: 700;
      color: #111827;
    }

    .product-link {
      font-size: 11px;
      color: #6366f1;
      text-decoration: underline;
      cursor: pointer;
    }

    .escrow-hint {
      font-size: 11px;
      color: #6b7280;
      padding: 0 16px 4px;
      background: #ffffff;
    }

    .escrow-hint span {
      color: #2563eb;
      font-weight: 500;
      cursor: pointer;
    }

    /* ì±„íŒ… ì˜ì—­ */
    .chat-body {
      flex: 1;
      padding: 8px 12px 12px;
      overflow-y: auto;
      background: #f9fafb;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .chat-date {
      align-self: center;
      font-size: 11px;
      color: #9ca3af;
      margin: 4px 0;
    }

    .message-row {
      display: flex;
      gap: 6px;
      align-items: flex-end;
      max-width: 85%;
    }

    .message-row.seller {
      /* ì™¼ìª½(íŒë§¤ì) */
      justify-content: flex-start;
    }

    .message-row.buyer {
      /* ì˜¤ë¥¸ìª½(êµ¬ë§¤ì) */
      margin-left: auto;
      justify-content: flex-end;
    }

    .message-bubble {
      padding: 8px 12px;
      border-radius: 16px;
      font-size: 13px;
      line-height: 1.4;
      word-break: break-word;
      white-space: pre-line;
    }

    .message-row.seller .message-bubble {
      background: #e5e7eb;
      color: #111827;
      border-bottom-left-radius: 4px;
    }

    .message-row.buyer .message-bubble {
      background: #fde68a;
      color: #111827;
      border-bottom-right-radius: 4px;
    }

    .message-meta {
      font-size: 10px;
      color: #9ca3af;
      margin: 2px 4px;
    }

    .message-meta.buyer {
      text-align: right;
    }

    /* ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ */
    .quick-replies {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      padding: 0 12px 4px;
    }

    .quick-reply-btn {
      border: none;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 11px;
      background: #eff6ff;
      color: #1d4ed8;
      cursor: pointer;
      transition: background 0.1s ease, transform 0.05s ease;
    }

    .quick-reply-btn:hover {
      background: #dbeafe;
    }
    .quick-reply-btn:active {
      transform: scale(0.96);
    }

    /* í•˜ë‹¨ ì…ë ¥ì°½ */
    .chat-input-area {
      border-top: 1px solid #e5e7eb;
      padding: 8px 10px;
      background: #ffffff;
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .chat-input-wrapper {
      flex: 1;
      background: #f3f4f6;
      border-radius: 999px;
      padding: 6px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .chat-input {
      border: none;
      outline: none;
      background: transparent;
      width: 100%;
      font-size: 13px;
    }

    .chat-send-btn {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: none;
      background: #facc15;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      color: #111827;
      transition: transform 0.08s ease, box-shadow 0.08s ease;
    }

    .chat-send-btn:active {
      transform: scale(0.95);
      box-shadow: 0 0 0 rgba(0, 0, 0, 0);
    }

    /* ëª¨ë°”ì¼ ì ì‘ */
    @media (max-width: 480px) {
      .app {
        width: 100%;
        height: 100vh;
        border-radius: 0;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- ìƒë‹¨ ë°” -->
    <div class="header">
      <div class="header-left">
        <button class="back-btn" title="ë’¤ë¡œê°€ê¸°">â†</button>
        <div class="chat-title">
          <span class="chat-title-main">íŒë§¤ì @duck1 ë‹˜ê³¼ì˜ ê±°ë˜</span>
          <span class="chat-title-sub" id="chatTitleSub">íŒë§¤ì Â· ë“±ê¸‰</span>
        </div>
      </div>
      <div class="header-right">â‹¯</div>
    </div>

    <!-- ê±°ë˜ ìƒëŒ€ ì •ë³´ ë°•ìŠ¤ -->
    <div class="partner-info">
      <div class="partner-avatar">
        <!-- TODO: JSì—ì„œ srcë¥¼ ì±„ì›Œì¤„ ê±°ë¼ ì—¬ê¸°ì„œëŠ” ë¹ˆ img -->
        <img id="duckBadge" src="" alt="ë“±ê¸‰ ë°°ì§€" />
      </div>
      <div class="partner-text">
        <div class="partner-row-1">
          <div class="partner-nick">íŒë§¤ì @duck1</div>
          <div class="partner-tag" id="partnerTag">ë“±ê¸‰</div>
        </div>
        <div class="partner-row-2" id="partnerStats">
          <!-- JSë¡œ ì¡°ê±´ í…ìŠ¤íŠ¸ ì±„ì›€ -->
        </div>
        <div class="partner-row-3" id="partnerDesc">
          <!-- JSë¡œ ì„¤ëª… ì±„ì›€ -->
        </div>
      </div>
    </div>

    <!-- ìƒí’ˆ ì •ë³´ ì¹´ë“œ -->
    <div class="product-card">
      <div class="product-thumb">
        êµ¿ì¦ˆ<br />ì´ë¯¸ì§€
      </div>
      <div class="product-info">
        <div class="product-title">NCT ë§ˆí¬ í¬í† ì¹´ë“œ</div>
        <div class="product-meta">
          <span>ì§ê±°ë˜(ë¶€ì‚°)</span>
          <span>íƒë°°(+3,000ì›)</span>
        </div>
        <div class="product-price">10,000ì›</div>
        <div class="product-link" id="productLink">ìƒí’ˆ ìƒì„¸ ë³´ê¸° &gt;</div>
      </div>
    </div>

    <div class="escrow-hint">
      ğŸ”’ ì•ˆì „í•˜ê²Œ ê±°ë˜í•˜ê³  ì‹¶ë‹¤ë©´ <span id="escrowLink">ì—ìŠ¤í¬ë¡œ ê²°ì œ ì•ˆë‚´</span>ë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”.
    </div>

    <!-- ì±„íŒ… ì˜ì—­ -->
    <div class="chat-body" id="chatBody">
      <div class="chat-date">ì˜¤ëŠ˜</div>
      <!-- íŒë§¤ì/êµ¬ë§¤ì ëŒ€í™”ê°€ JSë¡œ ì¶”ê°€ë¨ -->
    </div>

    <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ ë²„íŠ¼ ì˜ì—­ -->
    <div class="quick-replies" id="quickReplies">
      <button class="quick-reply-btn" data-type="deal">ê±°ë˜í•˜ê³  ì‹¶ì–´ìš”</button>
      <button class="quick-reply-btn" data-type="question">ìƒí’ˆì— ëŒ€í•œ ë¬¸ì˜ê°€ ìˆì–´ìš”</button>
      <button class="quick-reply-btn" data-type="price">ê°€ê²© ì œì•ˆ ë“œë¦¬ê³  ì‹¶ì–´ìš”</button>
    </div>

    <!-- ì…ë ¥ì°½ -->
    <div class="chat-input-area">
      <div class="chat-input-wrapper">
        <input
          id="chatInput"
          class="chat-input"
          type="text"
          placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...(êµ¬ë§¤ì)"
        />
      </div>
      <button id="sendBtn" class="chat-send-btn" title="ì „ì†¡">â¤</button>
    </div>
  </div>

  <script>
    const chatBody = document.getElementById("chatBody");
    const chatInput = document.getElementById("chatInput");
    const sendBtn = document.getElementById("sendBtn");
    const escrowLink = document.getElementById("escrowLink");
    const quickReplies = document.getElementById("quickReplies");
    const duckBadgeImg = document.getElementById("duckBadge");
    const partnerTagEl = document.getElementById("partnerTag");
    const partnerStatsEl = document.getElementById("partnerStats");
    const partnerDescEl = document.getElementById("partnerDesc");
    const chatTitleSubEl = document.getElementById("chatTitleSub");
    const productLink = document.getElementById("productLink");

    // TODO: ì—¬ê¸° ì´ë¯¸ì§€ ê²½ë¡œë¥¼ ë„ˆê°€ ê°€ì§„ íŒŒì¼ëª…ì— ë§ê²Œ ìˆ˜ì •í•´ì¤˜!
    // ì˜ˆ: ê°™ì€ í´ë”ì— ì €ì¥í–ˆë‹¤ë©´ "sprout.png" ì´ëŸ° ì‹ìœ¼ë¡œ.
    const levels = [
      {
        key: "seed",
        name: "ìƒˆì‹¹ë•",
        label: "ìƒˆì‹¹ë• ğŸŒ±",
        img: "ìƒˆì‹¹ë•.png", // ìƒˆì‹¹ë• ì´ë¯¸ì§€
        stats: ["ê¸°ë³¸ íšŒì›", "ê±°ë˜ ì‹œì‘ ë‹¨ê³„"],
        desc: "ì–´í–‰ë• ê¸°ë³¸ íšŒì›ì´ì—ìš”. ì²« ê±°ë˜ë¥¼ ì¤€ë¹„ ì¤‘ì¸ ìƒˆì‹¹ ë•í›„ì˜ˆìš” ğŸŒ±"
      },
      {
        key: "baby",
        name: "ì•„ê¸°ë•",
        label: "ì•„ê¸°ë• ğŸ£",
        img: "ì•„ê¸°ë•.png", // ì•„ê¸°ë• ì´ë¯¸ì§€
        stats: ["ê±°ë˜ 1íšŒ ì´ìƒ", "í›„ê¸° 1ê°œ ì´ìƒ ì‘ì„±"],
        desc: "ê±°ë˜ì™€ í›„ê¸°ë¥¼ ëª¨ë‘ í•œ ë²ˆ ì´ìƒ ë‚¨ê¸´, ì´ì œ ë§‰ ì ì‘í•œ ì•„ê¸° ë•í›„ì˜ˆìš”."
      },
      {
        key: "passion",
        name: "ì—´ì •ë•",
        label: "ì—´ì •ë• ğŸ”¥",
        img: "ì—´ì •ë•.png", // ì—´ì •ë• ì´ë¯¸ì§€
        stats: ["ëˆ„ì  ê±°ë˜ 5íšŒ ì´ìƒ", "í›„ê¸° 3ê°œ ì´ìƒ", "í‰ì  4.3 ì´ìƒ"],
        desc: "ì—¬ëŸ¬ ë²ˆ ì„±ì‹¤íˆ ê±°ë˜í•œ ì—´ì •ì ì¸ ë•í›„ì˜ˆìš”. ì‹ ë¢°ë„ë„ ë†’ì€ í¸ì´ì—ìš”!"
      },
      {
        key: "swan",
        name: "ë°±ì¡°ë•",
        label: "ë°±ì¡°ë• ğŸ¦¢",
        img: "ë°±ì¡°ë•.png", // ë°±ì¡°ë• ì´ë¯¸ì§€
        stats: [
          "ëˆ„ì  ê±°ë˜ 20íšŒ ì´ìƒ",
          "í›„ê¸° 10ê°œ ì´ìƒ",
          "í‰ì  4.7 ì´ìƒ",
          "ë¶„ìŸÂ·í´ë ˆì„ 0ê±´"
        ],
        desc: "ìµœìƒìœ„ ì‹ ë¢° ë“±ê¸‰ì˜ ê±°ë˜ìì˜ˆìš”. ë¶„ìŸ ì—†ì´ ê¹¨ë—í•œ ê±°ë˜ë§Œ í•´ì˜¨ ë ˆì „ë“œ ë•í›„!"
      }
    ];

    function getTimeString() {
      const now = new Date();
      return now.toLocaleTimeString("ko-KR", {
        hour: "2-digit",
        minute: "2-digit",
        hour12: true
      });
    }

    // ì™¼ìª½: íŒë§¤ì ë§í’ì„ 
    function addSellerMessage(text) {
      const row = document.createElement("div");
      row.className = "message-row seller";

      const bubble = document.createElement("div");
      bubble.className = "message-bubble";
      bubble.textContent = text;

      row.appendChild(bubble);
      chatBody.appendChild(row);

      const meta = document.createElement("div");
      meta.className = "message-meta";
      meta.textContent = `${getTimeString()} Â· íŒë§¤ì`;
      chatBody.appendChild(meta);

      chatBody.scrollTop = chatBody.scrollHeight;
    }

    // ì˜¤ë¥¸ìª½: êµ¬ë§¤ì ë§í’ì„ 
    function addBuyerMessage(text) {
      if (!text.trim()) return;

      const row = document.createElement("div");
      row.className = "message-row buyer";

      const bubble = document.createElement("div");
      bubble.className = "message-bubble";
      bubble.textContent = text;

      row.appendChild(bubble);
      chatBody.appendChild(row);

      const meta = document.createElement("div");
      meta.className = "message-meta buyer";
      meta.textContent = `${getTimeString()} Â· ë‚˜(êµ¬ë§¤ì)`;
      chatBody.appendChild(meta);

      chatBody.scrollTop = chatBody.scrollHeight;
    }

    function handleSend() {
      const text = chatInput.value;
      if (!text.trim()) return;
      addBuyerMessage(text);
      chatInput.value = "";
      // ììœ  ì…ë ¥ì—ëŠ” ìë™ì‘ë‹µ X (ë°ëª¨ìš©)
    }

    // ì¹´í…Œê³ ë¦¬ ì„ íƒ ì‹œ ë™ì‘
    function handleQuickReply(type, label) {
      addBuyerMessage(label);

      // í•œ ë²ˆ ì„ íƒí•˜ë©´ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
      quickReplies.style.display = "none";

      let reply = "";
      if (type === "deal") {
        reply =
          "ë„¤, ê±°ë˜ ê°€ëŠ¥í•´ìš”! ğŸ˜Š\nì›í•˜ì‹œëŠ” ê±°ë˜ ë°©ì‹(ì§ê±°ë˜/íƒë°°)ê³¼ ê°€ëŠ¥í•œ ì‹œê°„ëŒ€ë¥¼ ì•Œë ¤ì£¼ì‹œë©´ ì¡°ìœ¨í•´ ë³¼ê²Œìš”.";
      } else if (type === "question") {
        reply =
          "ìƒí’ˆ ìƒíƒœë‚˜ êµ¬ì„±, ì¶”ê°€ ì‚¬ì§„ ë“± ê¶ê¸ˆí•˜ì‹  ì  í¸í•˜ê²Œ ë§ì”€í•´ ì£¼ì„¸ìš”! ìµœëŒ€í•œ ìì„¸íˆ ë‹µë³€ ë“œë¦´ê²Œìš” ğŸ™‚";
      } else if (type === "price") {
        reply =
          "ê°€ê²© ì œì•ˆë„ ê°€ëŠ¥í•´ìš”! ìƒê°í•˜ê³  ê³„ì‹  ê¸ˆì•¡ì„ ë³´ë‚´ì£¼ì‹œë©´ ê²€í†  í›„ ë‹µë³€ ë“œë¦´ê²Œìš”.";
      }

      setTimeout(() => {
        addSellerMessage(reply);
      }, 600);
    }

    // ëœë¤ ë“±ê¸‰ ì ìš©
    function applyRandomLevel() {
      const randomIndex = Math.floor(Math.random() * levels.length);
      const level = levels[randomIndex];

      // ë°°ì§€ ì´ë¯¸ì§€
      duckBadgeImg.src = level.img;
      duckBadgeImg.alt = level.name;

      // íƒœê·¸ í…ìŠ¤íŠ¸
      partnerTagEl.textContent = level.label;

      // ìƒë‹¨ ì„œë¸Œ íƒ€ì´í‹€ë„ ì—…ë°ì´íŠ¸
      chatTitleSubEl.textContent = `íŒë§¤ì Â· ${level.label}`;

      // ì¡°ê±´(stats) ì±„ìš°ê¸°
      partnerStatsEl.innerHTML = "";
      level.stats.forEach((s) => {
        const span = document.createElement("span");
        span.textContent = s;
        partnerStatsEl.appendChild(span);
      });

      // ì„¤ëª…
      partnerDescEl.textContent = level.desc;
    }

    // ì´ë²¤íŠ¸ ë°”ì¸ë”©
    sendBtn.addEventListener("click", handleSend);
    chatInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        handleSend();
      }
    });

    escrowLink.addEventListener("click", () => {
      alert(
        "ì—¬ê¸°ì—ëŠ” ë‚˜ì¤‘ì— ì‹¤ì œ ì—ìŠ¤í¬ë¡œ ê²°ì œ ì•ˆë‚´ í˜ì´ì§€(ë˜ëŠ” ë§í¬)ë¥¼ ì—°ê²°í•  ìˆ˜ ìˆì–´ìš” :)"
      );
    });

    Array.from(document.querySelectorAll(".quick-reply-btn")).forEach((btn) => {
      btn.addEventListener("click", () => {
        const type = btn.getAttribute("data-type");
        const label = btn.textContent.trim();
        handleQuickReply(type, label);
      });
    });

    // ìƒí’ˆ ìƒì„¸ ë³´ê¸° â†’ í”¼ê·¸ë§ˆ ë§í¬ë¡œ ì´ë™
    productLink.addEventListener("click", () => {
      // TODO: ì—¬ê¸° URLì„ ì‹¤ì œ í”¼ê·¸ë§ˆ í”„ë¡œí† íƒ€ì… ê³µìœ  ë§í¬ë¡œ êµì²´í•´ì¤˜!
      const figmaUrl = "https://www.figma.com/your-figma-link-here";
      window.open(figmaUrl, "_blank");
    });

    // í˜ì´ì§€ ë¡œë“œ ì‹œ: ëœë¤ ë“±ê¸‰ ì ìš© + ì²« ì¸ì‚¬ ë©”ì‹œì§€
    window.addEventListener("load", () => {
      applyRandomLevel();
      addSellerMessage(
        "ì•ˆë…•í•˜ì„¸ìš”! ğŸ˜Š ë¬´ì—‡ì„ ë¬¸ì˜í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?\nì•„ë˜ì—ì„œ ì„ íƒí•˜ì‹œê±°ë‚˜, ì§ì ‘ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”."
      );
    });
  </script>
</body>
</html>
